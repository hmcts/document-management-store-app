api:
  version: 1.1.0

spring:
  data:
    rest:
      detection-strategy: annotated
  jackson:
    serialization:
      indent_output: true
  http:
    multipart:
      max-file-size: ${MAX_FILE_SIZE:90MB}
      max-request-size: ${MAX_FILE_SIZE:90MB}
  profiles:
    active: dev
  jpa:
    database-platform: uk.gov.hmcts.dm.dialect.CustomPostgresSqlDialect
    database: postgresql
    show-sql: ${SHOW_SQL:true}
    hibernate:
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    properties:
      hiberante:
        dialect: uk.gov.hmcts.dm.dialect.CustomPostgresSqlDialect

  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/evidence}
    username: ${SPRING_DATASOURCE_USERNAME:evidence}
    password: ${SPRING_DATASOURCE_PASSWORD:evidence}

    platform: postgresql
    time-between-eviction-runs-millis: ${STALE_CONN_EVICTION_FREQUENCY:60000}
    tomcat:
      max-active: ${MAX_ACTIVE_DB_CONNECTIONS:50} # Maximum number of active connections that can be allocated from this pool at the same time.
      max-idle: ${MAX_IDLE_DB_CONNECTIONS:25}
      max-wait: ${MAX_WAIT_DB_CONNECTIONS:10000} # Number of ms to wait before throwing an exception if no connection is available.
      test-on-borrow: ${TEST_ON_BORROW_DB_CONNECTION:true} # Validate the connection before borrowing it from the pool.
  batch:
    job:
      enabled: ${ENABLE_TTL:true}
      ttlCronExpression: ${TTL_CRON_EXPRESSION:"*/60 * * * * *"}
      auditUserName: ${TTL_JOB_AUDIT_USERNAME:"(admin)"}
      auditServiceName: ${TTL_JOB_AUDIT_SERVICE_NAME:"dm"}


dm:
  multipart:
    whitelist: ${DM_MULTIPART_WHITELIST:text/plain,text/csv,image/gif,image/tiff,image/jpeg,image/png,image/webp,image/bmp,application/pdf,application/rtf,application/msword,application/vnd.ms-powerpoint,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.oasis.opendocument.text,application/vnd.oasis.opendocument.spreadsheet,application/vnd.oasis.opendocument.presentation,audio/wav,audio/midi,audio/mpeg,audio/webm,audio/ogg,video/ogg,audio/3gpp,video/3gpp,audio/3gpp2,video/3gpp2,audio/x-wav,audio/wav,video/webm,video/mpeg}

auth:
  idam:
    client:
      baseUrl: ${IDAM_CLIENT_URL:http://localhost:8081}
  provider:
    service:
      client:
        baseUrl: ${PROVIDER_SERVICE_CLIENT_URL:http://localhost:8082}

security:
  headers:
    cache: false

logging:
  level:
    org.springframework.web: ${LOG_LEVEL_SPRING_WEB:INFO}
    uk.gov.hmcts.dm: ${LOG_LEVEL_DM:INFO}

liquibase:
  enabled: true
  change-log: classpath:/db/changelog/db.changelog-master.xml

server:
  port: ${SERVER_PORT:8083}

authorization:
  case-worker-roles: ${CASE_WORKER_ROLES:caseworker-probate,caseworker-cmc,caseworker-sscs,caseworker-divorce}
  s2s-names-whitelist: ${S2S_NAMES_WHITELIST:sscs,divorce,ccd,em_gw}

errors:
  globalIncludeStackTrace: ${SHOW_STACK_TRACE:true}

info:
  app:
    environment: ${PACKAGES_ENVIRONMENT:unknown}
    project: ${PACKAGES_PROJECT:unknown}
    name: ${PACKAGES_NAME:unknown}
#    version: ${PACKAGES_VERSION:unknown}

health:
  status:
    order:
    - FATAL
    - DOWN
    - UNKNOWN
    - UP
  disk:
    threshold: ${HEALTH_DISK_THRESHOLD:262144000}

endpoints:
  health:
    sensitive: ${ENDPOINTS_HEALTH_SENSITIVE:false}
  info:
    sensitive: ${ENDPOINTS_INFO_SENSITIVE:false}


management:
  security:
    enabled: false
  diskspace:
    enabled: true
  db:
    enabled: true

thumbnail:
    imageThumbnailCreator: ${SUPPORT_IMG_THUMBNAIL_MIME_TYPES:image/jpeg,image/png,image/gif,image/webp,image/bmp}
    pdfThumbnailCreator: ${SUPPORT_PDF_THUMBNAIL_MIME_TYPES:application/pdf}


toggle:
  metadatasearchendpoint: ${ENABLE_METADATA_SEARCH:true}
  documentandmetadatauploadendpoint: ${ENABLE_DOCUMENT_AND_METADATA_UPLOAD:true}
  folderendpoint: ${ENABLE_FOLDER_API:true}
  includeidamhealth: ${ENABLE_IDAM_HEALTH_CHECK:false}
  deleteenabled: ${ENABLE_DELETE:true}
  ttl: ${ENABLE_TTL:true}
  thumbnail: ${ENABLE_THUMBNAIL:true}



