java:
  postgresql:
    postgresqlUsername: evidence
    postgresqlPassword: evidence
    nameOverride: dm-store-db
    service:
      port: 5432
  image: 'hmctspublic.azurecr.io/dm/store:latest'
  applicationPort: '4603'
  aadIdentityName: dm-store
  keyVaults:
    dm:
      resourceGroup: dm-shared
      secrets:
        - AppInsightsInstrumentationKey
        - dm-store-storage-account-primary-connection-string
        - dm-store-storage-account-secondary-connection-string
        - store-POSTGRES-PASS

  environment:
    MAX_ACTIVE_DB_CONNECTIONS: '50'

    # db
    SPRING_DATASOURCE_URL: jdbc:postgresql://dm-store-postgres-db-{{ .Values.global.environment }}.postgres.database.azure.com:5432/evidence?ssl=disable
#    SPRING_DATASOURCE_URL: jdbc:postgresql://{{ .Release.Name }}-{{ .Values.postgresql.nameOverride}}:5432/postgres?ssl=disable
    SPRING_DATASOURCE_USERNAME: evidence@dm-store-postgres-db-{{ .Values.global.environment }}

    MAX_FILE_SIZE: '100MB'

      # idam
    IDAM_USER_BASE_URI: 'https://idam-api.{{ .Values.global.environment }}.platform.hmcts.net'
    IDAM_S2S_BASE_URI: 'http://rpe-service-auth-provider-{{ .Values.global.environment }}.service.core-compute-{{ .Values.global.environment }}.internal'

    # logging vars & healthcheck
    REFORM_SERVICE_NAME: dm-store
    REFORM_TEAM: evidence
    REFORM_SERVICE_TYPE: java

    PACKAGES_NAME: dm-store
    PACKAGES_PROJECT: evidence

    LOG_OUTPUT: single

      # addtional log
    ROOT_LOGGING_LEVEL: INFO
    LOG_LEVEL_SPRING_WEB: INFO
    LOG_LEVEL_DM: INFO
    SHOW_SQL: 'false'
    JSON_CONSOLE_PRETTY_PRINT: 'false'

    ENABLE_DB_MIGRATE: 'false'

    DM_MULTIPART_WHITELIST: 'image/jpeg,application/pdf,image/tiff,image/png,image/bmp,text/plain,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.wordprocessingml.template,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.spreadsheetml.template,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/vnd.openxmlformats-officedocument.presentationml.template,application/vnd.openxmlformats-officedocument.presentationml.slideshow,application/rtf,text/csv'
    DM_MULTIPART_WHITELIST_EXT: '.jpg,.jpeg,.bmp,.tif,.tiff,.png,.pdf,.txt,.doc,.dot,.docx,.dotx,.xls,.xlt,.xla,.xlsx,.xltx,.xlsb,.ppt,.pot,.pps,.ppa,.pptx,.potx,.ppsx,.png,.pdf,.rtf,.csv'

    # Toggles
    ENABLE_IDAM_HEALTH_CHECK: 'false'
    ENABLE_METADATA_SEARCH: 'true'
    ENABLE_DOCUMENT_AND_METADATA_UPLOAD: 'false'
    ENABLE_FOLDER_API: 'true'
    ENABLE_DELETE: 'true'
    ENABLE_TTL: 'true'
    ENABLE_THUMBNAIL: 'true'

    # Migration Job specific
    BLOBSTORE_MIGRATE_CCD_SECRET: 'y2hahvdZ9evcTVq2'
    BLOBSTORE_MIGRATE_CCD_PUBLIC_KEY_REQUIRED: 'false'
    BLOBSTORE_MIGRATE_CCD_PUBLIC_KEY: 'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDiQ//gc/G53d9dLCtf123fIYo49gUySuJuxOcw2GtieWTMSy+O7RNtsAIjVf3mCOdDNuN69tZNPEWMdaW8n11s9MwYFahtxDecyn0KIP9MvPsfSMSbxhp/f7kfbdB/H/S5eYea66JTyeJS6uNd76RdHttx0mLO30ZkRcXB25c2SIXhRYsdoeKS5GXHDdNejkQM0S/Ev94x2UunApmYHjWN1XcDhsEsAeF4WHnvYh2XiMn9vHY44AqvbWLlAmCgzaXpz8Xhl0fO7jDKSeReDyuM3UTMaiFFaxuvliGol7aIXq/aVe/miiD2SLxHZ6RxAPW80bhXrzJMTLTCqhCEhzfv someone@somewhere.sometime'

    # Document Storage
    #STORAGEACCOUNT_PRIMARY_CONNECTION_STRING: "DefaultEndpointsProtocol=https;AccountName=$(STORAGE_ACCOUNT_NAME);AccountKey=$(STORAGE_ACCOUNT_KEY);EndpointSuffix=core.windows.net"
    #STORAGEACCOUNT_SECONDARY_CONNECTION_STRING: ${data.azurerm_key_vault_secret.dm_store_storageaccount_secondary_connection_string.value}
    STORAGE_CONTAINER_DOCUMENT_CONTAINER_NAME: dm-store-docstore-{{ .Values.global.environment }}

blobstorage:
  resourceGroup: dm-store-aks
  teamName: "CCD"
  location: uksouth
  setup:
    containers:
      - dm-docstore
  enabled: false
